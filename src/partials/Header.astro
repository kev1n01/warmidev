---
import ThemeToogle from "@/components/ThemeToogle.astro";
import IconTranslate from "@/icons/IconTranslate.astro";
import IconMenu from "@/icons/IconMenu.astro";
import IconX from "@/icons/IconX.astro";
---

<header
    class="sticky top-3 z-10 w-full rounded-xl border border-white/10 bg-black/25 backdrop-blur-3xl shadow-inner shadow-white/50"
>
    <div class="flex items-center justify-between p-3 px-4 sm:px-6 lg:px-10">
        <h1
            class="font-buycat text-lg sm:text-xl lg:text-2xl font-bold flex gap-1 items-center content-center justify-center text-center place-content-center"
        >
            <img src="/src/assets/logo.png" alt="Logo" class="w-7 h-7" />
            <span>
                {"ARMI"}
            </span>
        </h1>

        <!-- Desktop Navigation -->
        <nav
            class="hidden sm:flex gap-5 text-gray-300 font-semibold text-sm sm:text-base"
            id="desktop-nav"
        >
            <a href="#about" class="hover:text-white transition-colors"
                >Nosotros</a
            >
            <a href="#sponsors" class="hover:text-white transition-colors"
                >Sponsors</a
            >
        </nav>

        <!-- Right side controls -->
        <div class="flex items-center gap-2 sm:gap-3">
            <!-- Language Selector -->
            <div
                class="cursor-pointer flex items-center gap-1 px-2 py-1 hover:bg-white/10 rounded-full transition-colors text-xs sm:text-sm"
            >
                <IconTranslate />
                ES
            </div>
            <ThemeToogle />

            <!-- Mobile Menu Button -->
            <button
                class="sm:hidden flex p-1.5 sm:p-2 hover:bg-white/10 rounded-full transition-colors"
                id="menu-toggle"
                aria-label="Toggle menu"
            >
                <IconMenu className="w-5 h-5 sm:w-6 sm:h-6" idName="menu-icon" />
                <IconX className="w-5 h-5 sm:w-6 sm:h-6 hidden" idName="close-icon" />
            </button>
        </div>
    </div>

    <!-- Mobile Menu Dropdown -->
    <div
        class="absolute top-full left-0 right-0 mt-1 hidden sm:hidden md:hidden"
        id="mobile-menu"
    >
        <div
            class="mx-4 rounded-xl border border-white/10 bg-black/80 backdrop-blur-3xl shadow-inner shadow-white/50"
        >
            <nav class="flex flex-col gap-2 p-4 text-gray-300 font-semibold">
                <a
                    href="#goals"
                    class="p-2 hover:bg-white/10 hover:text-white rounded-lg transition-colors"
                >
                    Objetivos
                </a>
                <a
                    href="#sponsors"
                    class="p-2 hover:bg-white/10 hover:text-white rounded-lg transition-colors"
                >
                    Sponsors
                </a>
            </nav>
        </div>
    </div>
</header>
<script>
    // Manejo del scroll
    const header = document.querySelector("#header");
    const handleScroll = () => {
        if (window.scrollY > 0) {
            header?.classList.add("bg-black/50");
            header?.classList.remove("bg-black/25");
        } else {
            header?.classList.add("bg-black/25");
            header?.classList.remove("bg-black/50");
        }
    };
    window.addEventListener("scroll", handleScroll);

    // Manejo del menú móvil
    const menuToggle = document.querySelector("#menu-toggle");
    const mobileMenu = document.querySelector("#mobile-menu");
    const menuIcon = document.querySelector("#menu-icon");
    const closeIcon = document.querySelector("#close-icon");

    menuToggle?.addEventListener("click", () => {
        mobileMenu?.classList.toggle("hidden");
        menuIcon?.classList.toggle("hidden");
        closeIcon?.classList.toggle("hidden");
    });

    // Ocultar elementos en la página /temas
    document.addEventListener("DOMContentLoaded", () => {
        if (window.location.pathname.startsWith("/temas")) {
            const nav = document.querySelector("#desktop-nav");
            const comenzarBtn = document.querySelector("#comenzar-btn");
            if (nav) nav.style.display = "none";
            comenzarBtn?.classList.add("hidden");
        }
    });

    // Cerrar menú móvil al hacer click en un enlace
    const mobileLinks = document.querySelectorAll("#mobile-menu a");
    mobileLinks.forEach((link) => {
        link.addEventListener("click", () => {
            mobileMenu?.classList.add("hidden");
            menuIcon?.classList.remove("hidden");
            closeIcon?.classList.add("hidden");
        });
    });
</script>
